# i18n + DeepL (Img2Brick)

## Ajouter une cle de traduction
1) Ajoute la cle dans `locales/fr.json`, `locales/en.json`, `locales/es.json`.
2) Utilise la cle dans le HTML/PHP via `data-i18n`.

Exemple :
```html
<button data-i18n="nav.signup">Sign Up</button>
```

## Marquer un texte statique (HTML/PHP)
Utilise `data-i18n` pour les noeuds texte, et `data-i18n-attr` pour les attributs user-facing :
```html
<input
  type="text"
  placeholder="Search"
  data-i18n-attr="placeholder:search.placeholder"
/>
```

## Traduire un texte provenant de la BDD (affichage)
Utilise `tr_db()` au moment du rendu (sans changer les requetes SQL) :
```php
<?php require_once __DIR__ . '/includes/i18n.php'; ?>
<p><?= htmlspecialchars(tr_db($row['description'] ?? ''), ENT_QUOTES, 'UTF-8') ?></p>
```

## Textes generes en JS
Utilise `I18N.t()` ou `I18N.format()` :
```js
const label = I18N.t('common.processing', 'Processing...');
const dims = I18N.format('dims.size_format', { w: 32, h: 64 }, '32 x 64');
```

Exemple dynamique (element cree en JS, traduit automatiquement) :
```js
const badge = document.createElement('span');
badge.textContent = 'Processing...';
document.body.appendChild(badge);
// MutationObserver + DeepL traduiront automatiquement si la langue change.
```

## Textes via CSS (content)
Ne pas traduire `content:"..."` directement. Utiliser `data-i18n-css` + `data-label` :
```html
<span class="badge" data-i18n-css="orders.status.delivered"></span>
```
```css
.badge::before {
  content: attr(data-label);
}
```

## Exemple avant / apres (page PHP)
Avant :
```html
<a class="btn btn-primary">Sign Up</a>
```
Apres :
```html
<a class="btn btn-primary" data-i18n="nav.signup">Sign Up</a>
```

## Configuration DeepL
- Cle dans `.env` : `DEEPL_AUTH_KEY=...`
- Endpoint par defaut : `https://api-free.deepl.com/v2/translate`
- Modifiable via `DEEPL_ENDPOINT` si compte Pro.
